<form [formGroup]="vehiculeForm"  class="max-w-10xl  p-6 bg-white rounded-lg shadow-md">
  <!-- Section Véhicule -->
  <div class="mb-8 p-4 border border-teal-200 rounded-lg">
    <p class="font-semibold text-teal-800 mt-4 flex items-center">
      <i class="fas fa-car mr-2 text-teal-800"></i>
      VEHICULE {{driverPrefix}} :
    </p>
    
    <!-- Société d'Assurance -->
    <div class="mt-4">
      <label class="font-medium text-gray-700">Société d'Assurance:</label>
      
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-2">
        <div>
          <label for="vehiculeAssure" class="block mb-1 text-sm font-medium text-gray-700">
            Véhicule assuré par <span class="text-red-500">*</span>
          </label>
          <input type="text" id="vehiculeAssure" formControlName="vehiculeAssure"
                 class="w-full p-2 border rounded-lg"
                 [class]="{
                   'border-gray-300': !vehiculeForm.get('vehiculeAssure')?.touched || vehiculeForm.get('vehiculeAssure')?.valid,
                   'border-red-500': vehiculeForm.get('vehiculeAssure')?.invalid && vehiculeForm.get('vehiculeAssure')?.touched
                 }">
          <div *ngIf="vehiculeForm.get('vehiculeAssure')?.invalid && vehiculeForm.get('vehiculeAssure')?.touched"
               class="text-red-500 text-xs mt-1">
            Ce champ est obligatoire
          </div>
        </div>
        
        <div>
          <label for="agence" class="block mb-1 text-sm font-medium text-gray-700">
            Agence <span class="text-red-500">*</span>
          </label>
          <input type="text" id="agence" formControlName="agence"
                 class="w-full p-2 border rounded-lg"
                 [class]="{
                   'border-gray-300': !vehiculeForm.get('agence')?.touched || vehiculeForm.get('agence')?.valid,
                   'border-red-500': vehiculeForm.get('agence')?.invalid && vehiculeForm.get('agence')?.touched
                 }">
          <div *ngIf="vehiculeForm.get('agence')?.invalid && vehiculeForm.get('agence')?.touched"
               class="text-red-500 text-xs mt-1">
            Ce champ est obligatoire
          </div>
        </div>
      </div>
      
      <div class="mt-4">
        <label for="contratAssurance" class="block mb-1 text-sm font-medium text-gray-700">
          Contrat d'assurance n° <span class="text-red-500">*</span>
        </label>
        <input type="text" id="contratAssurance" formControlName="contratAssurance"
               class="w-full p-2 border rounded-lg"
               [class]="{
                 'border-gray-300': !vehiculeForm.get('contratAssurance')?.touched || vehiculeForm.get('contratAssurance')?.valid,
                 'border-red-500': vehiculeForm.get('contratAssurance')?.invalid && vehiculeForm.get('contratAssurance')?.touched
               }">
        <div *ngIf="vehiculeForm.get('contratAssurance')?.invalid && vehiculeForm.get('contratAssurance')?.touched"
             class="text-red-500 text-xs mt-1">
          Ce champ est obligatoire
        </div>
      </div>
    </div>
    
    <!-- Validité attestation -->
    <div class="mt-4">
      <label class="font-medium text-gray-700">Attestation valable</label>
      
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-2">
        <div>
          <label for="dateDebut" class="block mb-1 text-sm font-medium text-gray-700">
            Du <span class="text-red-500">*</span>
          </label>
          <input type="date" id="dateDebut" formControlName="dateDebut"
                 class="w-full p-2 border rounded-lg"
                 [class]="{
                   'border-gray-300': !vehiculeForm.get('dateDebut')?.touched || vehiculeForm.get('dateDebut')?.valid,
                   'border-red-500': vehiculeForm.get('dateDebut')?.invalid && vehiculeForm.get('dateDebut')?.touched
                 }">
          <div *ngIf="vehiculeForm.get('dateDebut')?.errors?.['required'] && vehiculeForm.get('dateDebut')?.touched"
               class="text-red-500 text-xs mt-1">
            Date requise
          </div>
        </div>
        
        <div>
          <label for="dateFin" class="block mb-1 text-sm font-medium text-gray-700">
            Au <span class="text-red-500">*</span>
          </label>
          <input type="date" id="dateFin" formControlName="dateFin"
                 class="w-full p-2 border rounded-lg"
                 [class]="{
                   'border-gray-300': !vehiculeForm.get('dateFin')?.touched || vehiculeForm.get('dateFin')?.valid,
                   'border-red-500': vehiculeForm.get('dateFin')?.invalid && vehiculeForm.get('dateFin')?.touched
                 }">
          <div *ngIf="vehiculeForm.get('dateFin')?.errors?.['required'] && vehiculeForm.get('dateFin')?.touched"
               class="text-red-500 text-xs mt-1">
            Date requise
          </div>
          <div *ngIf="vehiculeForm.hasError('dateRangeInvalid')"
               class="text-red-500 text-xs mt-1">
            La date de fin doit être après la date de début
          </div>
        </div>
      </div>
    </div>
  </div>
<!-- Section Assuré -->
<div class="mb-8 p-4 border border-teal-200 rounded-lg">
  <label class="font-medium text-gray-700">Assuré :</label>
  
  <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-2">
    <div>
      <label for="nomAssure" class="block mb-1 text-sm font-medium text-gray-700">
        Nom <span class="text-red-500">*</span>
      </label>
      <input type="text" id="nomAssure" formControlName="nomAssure"
             class="w-full p-2 border rounded-lg"
             [class]="{
               'border-gray-300': !vehiculeForm.get('nomAssure')?.touched || vehiculeForm.get('nomAssure')?.valid,
               'border-red-500': vehiculeForm.get('nomAssure')?.invalid && vehiculeForm.get('nomAssure')?.touched
             }">
      <div *ngIf="vehiculeForm.get('nomAssure')?.invalid && vehiculeForm.get('nomAssure')?.touched"
           class="text-red-500 text-xs mt-1">
        Ce champ est obligatoire
      </div>
    </div>
    
    <div>
      <label for="prenomAssure" class="block mb-1 text-sm font-medium text-gray-700">
        Prénom <span class="text-red-500">*</span>
      </label>
      <input type="text" id="prenomAssure" formControlName="prenomAssure"
             class="w-full p-2 border rounded-lg"
             [class]="{
               'border-gray-300': !vehiculeForm.get('prenomAssure')?.touched || vehiculeForm.get('prenomAssure')?.valid,
               'border-red-500': vehiculeForm.get('prenomAssure')?.invalid && vehiculeForm.get('prenomAssure')?.touched
             }">
      <div *ngIf="vehiculeForm.get('prenomAssure')?.invalid && vehiculeForm.get('prenomAssure')?.touched"
           class="text-red-500 text-xs mt-1">
        Ce champ est obligatoire
      </div>
    </div>
  </div>
  
  
  <div>
    <label for="numSocietaire" class="block mb-1 text-sm font-medium text-gray-700">
      Numéro de sociétaire <span class="text-red-500">*</span>
    </label>
    <input type="text" id="numSocietaire" formControlName="numSocietaire"
           class="w-full p-2 border rounded-lg"
           [class]="{
             'border-gray-300': !vehiculeForm.get('numSocietaire')?.touched || vehiculeForm.get('numSocietaire')?.valid,
             'border-red-500': vehiculeForm.get('numSocietaire')?.invalid && vehiculeForm.get('numSocietaire')?.touched
           }">
    <div *ngIf="vehiculeForm.get('numSocietaire')?.invalid && vehiculeForm.get('numSocietaire')?.touched"
         class="text-red-500 text-xs mt-1">
      Ce champ est obligatoire
    </div>
  </div>
  <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-4">
    
    
    <div>
      <label for="telAssure" class="block mb-1 text-sm font-medium text-gray-700">
        Téléphone <span class="text-red-500">*</span>
      </label>
      <input type="tel" id="telAssure" formControlName="telAssure"
             class="w-full p-2 border rounded-lg"
             [class]="{
               'border-gray-300': !vehiculeForm.get('telAssure')?.touched || vehiculeForm.get('telAssure')?.valid,
               'border-red-500': vehiculeForm.get('telAssure')?.invalid && vehiculeForm.get('telAssure')?.touched
             }">
      <div *ngIf="vehiculeForm.get('telAssure')?.errors?.['required'] && vehiculeForm.get('telAssure')?.touched"
           class="text-red-500 text-xs mt-1">
        Ce champ est obligatoire
      </div>
      <div *ngIf="vehiculeForm.get('telAssure')?.errors?.['pattern'] && vehiculeForm.get('telAssure')?.touched"
           class="text-red-500 text-xs mt-1">
        Numéro de téléphone invalide
      </div>
    </div>
    <div>
      <label for="emailAssure" class="block mb-1 text-sm font-medium text-gray-700">
        Email <span class="text-red-500">*</span>
      </label>
      <input type="email" id="emailAssure" formControlName="emailAssure"
             class="w-full p-2 border rounded-lg"
             [class]="{
               'border-gray-300': !vehiculeForm.get('emailAssure')?.touched || vehiculeForm.get('emailAssure')?.valid,
               'border-red-500': vehiculeForm.get('emailAssure')?.invalid && vehiculeForm.get('emailAssure')?.touched
             }">
      <div *ngIf="vehiculeForm.get('emailAssure')?.errors?.['required'] && vehiculeForm.get('emailAssure')?.touched"
           class="text-red-500 text-xs mt-1">
        Ce champ est obligatoire
      </div>
      <div *ngIf="vehiculeForm.get('emailAssure')?.errors?.['email'] && vehiculeForm.get('emailAssure')?.touched"
           class="text-red-500 text-xs mt-1">
        Email invalide
      </div>
    </div>
  </div>
  
 
  
  <!-- Adresse Assuré -->
  <div class="mt-6">
    <label class="font-medium text-gray-700">Adresse de l'Assuré :</label>
    
   
      
      <div>
        <label for="villeAssure" class="block mb-1 text-sm font-medium text-gray-700">
          Ville <span class="text-red-500">*</span>
        </label>
        <input type="text" id="villeAssure" formControlName="villeAssure"
               class="w-full p-2 border rounded-lg"
               [class]="{
                 'border-gray-300': !vehiculeForm.get('villeAssure')?.touched || vehiculeForm.get('villeAssure')?.valid,
                 'border-red-500': vehiculeForm.get('villeAssure')?.invalid && vehiculeForm.get('villeAssure')?.touched
               }">
        <div *ngIf="vehiculeForm.get('villeAssure')?.invalid && vehiculeForm.get('villeAssure')?.touched"
             class="text-red-500 text-xs mt-1">
          Ce champ est obligatoire
        </div>
      </div>
    
    
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-4">
      <div>
        <label for="rueAssure" class="block mb-1 text-sm font-medium text-gray-700">
          Rue <span class="text-red-500">*</span>
        </label>
        <input type="text" id="rueAssure" formControlName="rueAssure"
               class="w-full p-2 border rounded-lg"
               [class]="{
                 'border-gray-300': !vehiculeForm.get('rueAssure')?.touched || vehiculeForm.get('rueAssure')?.valid,
                 'border-red-500': vehiculeForm.get('rueAssure')?.invalid && vehiculeForm.get('rueAssure')?.touched
               }">
        <div *ngIf="vehiculeForm.get('rueAssure')?.invalid && vehiculeForm.get('rueAssure')?.touched"
             class="text-red-500 text-xs mt-1">
          Ce champ est obligatoire
        </div>
      </div>
      
      <div>
        <label for="codePostalAssure" class="block mb-1 text-sm font-medium text-gray-700">
          Code postal <span class="text-red-500">*</span>
        </label>
        <input type="text" id="codePostalAssure" formControlName="codePostalAssure"
               class="w-full p-2 border rounded-lg"
               [class]="{
                 'border-gray-300': !vehiculeForm.get('codePostalAssure')?.touched || vehiculeForm.get('codePostalAssure')?.valid,
                 'border-red-500': vehiculeForm.get('codePostalAssure')?.invalid && vehiculeForm.get('codePostalAssure')?.touched
               }">
        <div *ngIf="vehiculeForm.get('codePostalAssure')?.errors?.['required'] && vehiculeForm.get('codePostalAssure')?.touched"
             class="text-red-500 text-xs mt-1">
          Ce champ est obligatoire
        </div>
        <div *ngIf="vehiculeForm.get('codePostalAssure')?.errors?.['pattern'] && vehiculeForm.get('codePostalAssure')?.touched"
             class="text-red-500 text-xs mt-1">
          Code postal invalide (4 chiffres requis)
        </div>
      </div>
    </div>
  </div>
</div>
<div class="mt-4 flex items-center">
  <input type="checkbox" id="isAssureConducteur" formControlName="isAssureConducteur"
         class="h-4 w-4 text-teal-600 focus:ring-teal-500 border-gray-300 rounded">
  <label for="isAssureConducteur" class="ml-2 text-gray-700 font-medium">
    L'assuré est aussi le conducteur
  </label>
</div>
<!-- Conducteur (si différent de l'assuré) -->
<div *ngIf="!vehiculeForm.get('isAssureConducteur')?.value" class="mt-6">
  <div class="mb-8 p-4 border border-teal-200 rounded-lg">
    <label class="font-medium text-gray-700">Identité du Conducteur :</label>
    
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-2">
      <div>
        <label for="nomConducteur" class="block mb-1 text-sm font-medium text-gray-700">
          Nom <span class="text-red-500">*</span>
        </label>
        <input type="text" id="nomConducteur" formControlName="nomConducteur"
               class="w-full p-2 border rounded-lg"
               [class]="{
                 'border-gray-300': !vehiculeForm.get('nomConducteur')?.touched || vehiculeForm.get('nomConducteur')?.valid,
                 'border-red-500': vehiculeForm.get('nomConducteur')?.invalid && vehiculeForm.get('nomConducteur')?.touched
               }">
        <div *ngIf="vehiculeForm.get('nomConducteur')?.invalid && vehiculeForm.get('nomConducteur')?.touched"
             class="text-red-500 text-xs mt-1">
          Ce champ est obligatoire
        </div>
      </div>
      
      <div>
        <label for="prenomConducteur" class="block mb-1 text-sm font-medium text-gray-700">
          Prénom <span class="text-red-500">*</span>
        </label>
        <input type="text" id="prenomConducteur" formControlName="prenomConducteur"
               class="w-full p-2 border rounded-lg"
               [class]="{
                 'border-gray-300': !vehiculeForm.get('prenomConducteur')?.touched || vehiculeForm.get('prenomConducteur')?.valid,
                 'border-red-500': vehiculeForm.get('prenomConducteur')?.invalid && vehiculeForm.get('prenomConducteur')?.touched
               }">
        <div *ngIf="vehiculeForm.get('prenomConducteur')?.invalid && vehiculeForm.get('prenomConducteur')?.touched"
             class="text-red-500 text-xs mt-1">
          Ce champ est obligatoire
        </div>
      </div>
    </div>
    
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-4">
      <div>
        <label for="emailConducteur" class="block mb-1 text-sm font-medium text-gray-700">
          Email <span class="text-red-500">*</span>
        </label>
        <input type="email" id="emailConducteur" formControlName="emailConducteur"
               class="w-full p-2 border rounded-lg"
               [class]="{
                 'border-gray-300': !vehiculeForm.get('emailConducteur')?.touched || vehiculeForm.get('emailConducteur')?.valid,
                 'border-red-500': vehiculeForm.get('emailConducteur')?.invalid && vehiculeForm.get('emailConducteur')?.touched
               }">
        <div *ngIf="vehiculeForm.get('emailConducteur')?.errors?.['required'] && vehiculeForm.get('emailConducteur')?.touched"
             class="text-red-500 text-xs mt-1">
          Ce champ est obligatoire
        </div>
        <div *ngIf="vehiculeForm.get('emailConducteur')?.errors?.['email'] && vehiculeForm.get('emailConducteur')?.touched"
             class="text-red-500 text-xs mt-1">
          Email invalide
        </div>
      </div>
      
      <div>
        <label for="telConducteur" class="block mb-1 text-sm font-medium text-gray-700">
          Téléphone <span class="text-red-500">*</span>
        </label>
        <input type="tel" id="telConducteur" formControlName="telConducteur"
               class="w-full p-2 border rounded-lg"
               [class]="{
                 'border-gray-300': !vehiculeForm.get('telConducteur')?.touched || vehiculeForm.get('telConducteur')?.valid,
                 'border-red-500': vehiculeForm.get('telConducteur')?.invalid && vehiculeForm.get('telConducteur')?.touched
               }">
        <div *ngIf="vehiculeForm.get('telConducteur')?.errors?.['required'] && vehiculeForm.get('telConducteur')?.touched"
             class="text-red-500 text-xs mt-1">
          Ce champ est obligatoire
        </div>
        <div *ngIf="vehiculeForm.get('telConducteur')?.errors?.['pattern'] && vehiculeForm.get('telConducteur')?.touched"
             class="text-red-500 text-xs mt-1">
          Numéro de téléphone invalide
        </div>
      </div>
    </div>
    
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-4">
      <div>
        <label for="numPermis" class="block mb-1 text-sm font-medium text-gray-700">
          Permis de conduire n° <span class="text-red-500">*</span>
        </label>
        <input type="text" id="numPermis" formControlName="numPermis"
               class="w-full p-2 border rounded-lg"
               [class]="{
                 'border-gray-300': !vehiculeForm.get('numPermis')?.touched || vehiculeForm.get('numPermis')?.valid,
                 'border-red-500': vehiculeForm.get('numPermis')?.invalid && vehiculeForm.get('numPermis')?.touched
               }">
        <div *ngIf="vehiculeForm.get('numPermis')?.invalid && vehiculeForm.get('numPermis')?.touched"
             class="text-red-500 text-xs mt-1">
          Ce champ est obligatoire
        </div>
      </div>
      
      <div>
        <label for="dateDelivrance" class="block mb-1 text-sm font-medium text-gray-700">
          Délivré le <span class="text-red-500">*</span>
        </label>
        <input type="date" id="dateDelivrance" formControlName="dateDelivrance"
               class="w-full p-2 border rounded-lg"
               [class]="{
                 'border-gray-300': !vehiculeForm.get('dateDelivrance')?.touched || vehiculeForm.get('dateDelivrance')?.valid,
                 'border-red-500': vehiculeForm.get('dateDelivrance')?.invalid && vehiculeForm.get('dateDelivrance')?.touched
               }">
        <div *ngIf="vehiculeForm.get('dateDelivrance')?.errors?.['required'] && vehiculeForm.get('dateDelivrance')?.touched"
             class="text-red-500 text-xs mt-1">
          Date requise
        </div>
        <div *ngIf="vehiculeForm.get('dateDelivrance')?.errors?.['futureDate'] && vehiculeForm.get('dateDelivrance')?.touched"
             class="text-red-500 text-xs mt-1">
          La date ne peut pas être dans le futur
        </div>
      </div>
    </div>
    
    <!-- Adresse Conducteur -->
    <div class="mt-6">
      <label class="font-medium text-gray-700">Adresse du Conducteur :</label>
      
     
        
        <div>
          <label for="villeConducteur" class="block mb-1 text-sm font-medium text-gray-700">
            Ville <span class="text-red-500">*</span>
          </label>
          <input type="text" id="villeConducteur" formControlName="villeConducteur"
                 class="w-full p-2 border rounded-lg"
                 [class]="{
                   'border-gray-300': !vehiculeForm.get('villeConducteur')?.touched || vehiculeForm.get('villeConducteur')?.valid,
                   'border-red-500': vehiculeForm.get('villeConducteur')?.invalid && vehiculeForm.get('villeConducteur')?.touched
                 }">
          <div *ngIf="vehiculeForm.get('villeConducteur')?.invalid && vehiculeForm.get('villeConducteur')?.touched"
               class="text-red-500 text-xs mt-1">
            Ce champ est obligatoire
          </div>
        </div>
      </div>
      
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-4">
        <div>
          <label for="rueConducteur" class="block mb-1 text-sm font-medium text-gray-700">
            Rue <span class="text-red-500">*</span>
          </label>
          <input type="text" id="rueConducteur" formControlName="rueConducteur"
                 class="w-full p-2 border rounded-lg"
                 [class]="{
                   'border-gray-300': !vehiculeForm.get('rueConducteur')?.touched || vehiculeForm.get('rueConducteur')?.valid,
                   'border-red-500': vehiculeForm.get('rueConducteur')?.invalid && vehiculeForm.get('rueConducteur')?.touched
                 }">
          <div *ngIf="vehiculeForm.get('rueConducteur')?.invalid && vehiculeForm.get('rueConducteur')?.touched"
               class="text-red-500 text-xs mt-1">
            Ce champ est obligatoire
          </div>
        </div>
        
        <div>
          <label for="codePostalConducteur" class="block mb-1 text-sm font-medium text-gray-700">
            Code postal <span class="text-red-500">*</span>
          </label>
          <input type="text" id="codePostalConducteur" formControlName="codePostalConducteur"
                 class="w-full p-2 border rounded-lg"
                 [class]="{
                   'border-gray-300': !vehiculeForm.get('codePostalConducteur')?.touched || vehiculeForm.get('codePostalConducteur')?.valid,
                   'border-red-500': vehiculeForm.get('codePostalConducteur')?.invalid && vehiculeForm.get('codePostalConducteur')?.touched
                 }">
          <div *ngIf="vehiculeForm.get('codePostalConducteur')?.errors?.['required'] && vehiculeForm.get('codePostalConducteur')?.touched"
               class="text-red-500 text-xs mt-1">
            Ce champ est obligatoire
          </div>
          <div *ngIf="vehiculeForm.get('codePostalConducteur')?.errors?.['pattern'] && vehiculeForm.get('codePostalConducteur')?.touched"
               class="text-red-500 text-xs mt-1">
            Code postal invalide (4 chiffres requis)
          </div>
        </div>
      </div>
    </div>
  </div>

  
  <!-- Section Véhicule -->
 <!-- Section Véhicule -->
<div class="mb-8 p-4 border border-teal-200 rounded-lg">
  <label class="font-medium text-gray-700">Identité du véhicule:</label>
  
  <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-2">
    <div>
      <label for="numImmatriculation" class="block mb-1 text-sm font-medium text-gray-700">
        N° d'immatriculation <span class="text-red-500">*</span>
      </label>
      <input type="text" id="numImmatriculation" formControlName="numImmatriculation"
             class="w-full p-2 border rounded-lg"
             [class]="{
               'border-gray-300': !vehiculeForm.get('numImmatriculation')?.touched || vehiculeForm.get('numImmatriculation')?.valid,
               'border-red-500': vehiculeForm.get('numImmatriculation')?.invalid && vehiculeForm.get('numImmatriculation')?.touched
             }">
      <div *ngIf="vehiculeForm.get('numImmatriculation')?.invalid && vehiculeForm.get('numImmatriculation')?.touched"
           class="text-red-500 text-xs mt-1">
        Ce champ est obligatoire
      </div>
    </div>
    
    <div>
      <label for="typeVehicule" class="block mb-1 text-sm font-medium text-gray-700">
        Type <span class="text-red-500">*</span>
      </label>
      <select id="typeVehicule" formControlName="typeVehicule"
              class="w-full p-2 border rounded-lg"
              [class]="{
                'border-gray-300': !vehiculeForm.get('typeVehicule')?.touched || vehiculeForm.get('typeVehicule')?.valid,
                'border-red-500': vehiculeForm.get('typeVehicule')?.invalid && vehiculeForm.get('typeVehicule')?.touched
              }">
        <option value="">Sélectionnez un type</option>
        <option value="Voiture">Voiture</option>
        <option value="Moto">Moto</option>
        <option value="Camion">Camion</option>
        <option value="Autre">Autre</option>
      </select>
      <div *ngIf="vehiculeForm.get('typeVehicule')?.invalid && vehiculeForm.get('typeVehicule')?.touched"
           class="text-red-500 text-xs mt-1">
        Veuillez sélectionner un type
      </div>
    </div>
  </div>
  
  <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-4">
    <div>
      <label for="marqueVehicule" class="block mb-1 text-sm font-medium text-gray-700">
        Marque <span class="text-red-500">*</span>
      </label>
      <input type="text" id="marqueVehicule" formControlName="marqueVehicule"
             class="w-full p-2 border rounded-lg"
             [class]="{
               'border-gray-300': !vehiculeForm.get('marqueVehicule')?.touched || vehiculeForm.get('marqueVehicule')?.valid,
               'border-red-500': vehiculeForm.get('marqueVehicule')?.invalid && vehiculeForm.get('marqueVehicule')?.touched
             }">
      <div *ngIf="vehiculeForm.get('marqueVehicule')?.invalid && vehiculeForm.get('marqueVehicule')?.touched"
           class="text-red-500 text-xs mt-1">
        Ce champ est obligatoire
      </div>
    </div>
    
    <div>
      <label for="modeleVehicule" class="block mb-1 text-sm font-medium text-gray-700">
        Modèle <span class="text-red-500">*</span>
      </label>
      <input type="text" id="modeleVehicule" formControlName="modeleVehicule"
             class="w-full p-2 border rounded-lg"
             [class]="{
               'border-gray-300': !vehiculeForm.get('modeleVehicule')?.touched || vehiculeForm.get('modeleVehicule')?.valid,
               'border-red-500': vehiculeForm.get('modeleVehicule')?.invalid && vehiculeForm.get('modeleVehicule')?.touched
             }">
      <div *ngIf="vehiculeForm.get('modeleVehicule')?.invalid && vehiculeForm.get('modeleVehicule')?.touched"
           class="text-red-500 text-xs mt-1">
        Ce champ est obligatoire
      </div>
    </div>
  </div>
</div>

  <!-- Section Sens suivi -->
  <div class="mb-8 p-4 border border-teal-200 rounded-lg">
    <label class="font-medium text-gray-700">Sens suivi</label>
    
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-2">
      <div>
        <label for="venantDe" class="block mb-1 text-sm font-medium text-gray-700">
          Venant de <span class="text-red-500">*</span>
        </label>
        <input type="text" id="venantDe" formControlName="venantDe"
               class="w-full p-2 border rounded-lg"
               [class]="{
                 'border-gray-300': !vehiculeForm.get('venantDe')?.touched ||vehiculeForm.get('venantDe')?.valid,
                 'border-red-500': vehiculeForm.get('venantDe')?.invalid && vehiculeForm.get('venantDe')?.touched
               }">
        <div *ngIf="vehiculeForm.get('venantDe')?.invalid && vehiculeForm.get('venantDe')?.touched"
             class="text-red-500 text-xs mt-1">
          Ce champ est obligatoire
        </div>
      </div>
      
      <div>
        <label for="allantA" class="block mb-1 text-sm font-medium text-gray-700">
          Allant à <span class="text-red-500">*</span>
        </label>
        <input type="text" id="allantA" formControlName="allantA"
               class="w-full p-2 border rounded-lg"
               [class]="{
                 'border-gray-300': !vehiculeForm.get('allantA')?.touched || vehiculeForm.get('allantA')?.valid,
                 'border-red-500': vehiculeForm.get('allantA')?.invalid && vehiculeForm.get('allantA')?.touched
               }">
        <div *ngIf="vehiculeForm.get('allantA')?.invalid && vehiculeForm.get('allantA')?.touched"
             class="text-red-500 text-xs mt-1">
          Ce champ est obligatoire
        </div>
      </div>
    </div>
  </div>
  
  <!-- Section Croquis -->
  <div class="mb-8 p-4 border border-teal-200 rounded-lg">
    <div class="flex flex-col md:flex-row gap-6">
      <!-- Outils à gauche -->
      <div class="w-full md:w-1/5 bg-gray-100 p-4 rounded-lg">
        <div class="mt-4">
          <h3 class="font-semibold mb-2">Point de choc</h3>
          <button (click)="toggleChocMode()" 
                  [class.bg-red-500]="chocMode"
                  [class.text-white]="chocMode"
                  class="w-full py-2 bg-gray-200 rounded hover:bg-gray-300 transition mb-2">
            {{ chocMode ? 'Mode actif' : 'Indiquer point de choc' }}
          </button>
          <button (click)="clearLastChoc()" 
                  class="w-full py-2 bg-red-100 text-red-700 rounded hover:bg-red-200 transition"
                  [disabled]="!activeVehicle || damagePoints.length === 0">
            Effacer point de choc
          </button>
        </div>
      </div>

      <!-- Zone principale avec icônes et canvas -->
      <div class="w-full md:w-4/5">
        <!-- Icônes de véhicules en horizontal -->
        <div class="flex justify-center gap-8 mb-6">
          <div (click)="selectVehicle('car')" 
               [class.ring-2]="activeVehicle === 'car'"
               [class.ring-teal-500]="activeVehicle === 'car'"
               class="vehicle-icon p-4 rounded-full cursor-pointer hover:bg-gray-100 transition">
            <i class="fas fa-car text-4xl text-teal-600"></i>
            <span class="block text-center mt-2 text-sm">Voiture</span>
          </div>

          <div (click)="selectVehicle('truck')"
               [class.ring-2]="activeVehicle === 'truck'"
               [class.ring-amber-500]="activeVehicle === 'truck'"
               class="vehicle-icon p-4 rounded-full cursor-pointer hover:bg-gray-100 transition">
            <i class="fas fa-truck text-4xl text-amber-500"></i>
            <span class="block text-center mt-2 text-sm">Camion</span>
          </div>

          <div (click)="selectVehicle('bike')"
               [class.ring-2]="activeVehicle === 'bike'"
               [class.ring-green-500]="activeVehicle === 'bike'"
               class="vehicle-icon p-4 rounded-full cursor-pointer hover:bg-gray-100 transition">
            <i class="fas fa-bicycle text-4xl text-green-500"></i>
            <span class="block text-center mt-2 text-sm">Vélo</span>
          </div>
        </div>

        <!-- Zone de dessin/clic -->
        <div class="relative bg-gray-50 border-2 border-gray-300 rounded-lg"
             style="height: 500px;">
          <!-- Véhicule actif agrandi -->
          <div *ngIf="activeVehicle" class="absolute inset-0 flex items-center justify-center">
            <i [class]="getVehicleIconClass()" class="text-8xl opacity-70"></i>
          </div>

          <!-- Points de choc -->
          <div *ngFor="let point of damagePoints" 
               class="absolute transform -translate-x-1/2 -translate-y-1/2 flex flex-col items-center"
               [style.left.px]="point.x"
               [style.top.px]="point.y">
            <div class="text-red-500 text-2xl">↓</div>
            <div class="mt-1 bg-white px-2 py-1 rounded shadow text-sm font-medium text-red-600 whitespace-nowrap">
              Point de choc
            </div>
          </div>

          <!-- Zone clicable -->
          <div *ngIf="chocMode && activeVehicle" 
               class="absolute inset-0 cursor-crosshair"
               (click)="addChocPoint($event)"></div>

          <!-- Message de confirmation -->
          <div *ngIf="lastChocAdded" 
               class="absolute bottom-4 left-4 bg-white p-2 rounded shadow animate-pulse">
            <p class="text-sm text-red-600 flex items-center">
              <i class="fas fa-heart mr-1"></i> Point de choc ajouté
            </p>
          </div>
        </div>
      </div>
    </div>

    <!-- Note sur le point de choc -->
    <div class="mt-4 p-3 bg-blue-50 rounded-lg">
      <p class="text-sm text-gray-700 flex items-center">
        <i class="fas fa-info-circle text-blue-500 mr-2"></i>
        10. Indiquer par une flèche le point de choc initial
      </p>
    </div>
  </div>
  
  <!-- Section Observations -->
  <div class="mb-8 p-4 border border-teal-200 rounded-lg">
    <div class="mt-4">
      <label for="observation" class="block mb-1 text-sm font-medium text-gray-700">
        Observation <span class="text-red-500">*</span>
      </label>
      <textarea id="observation" formControlName="observation" rows="4"
                class="w-full p-2 border rounded-lg"
                [class]="{
                  'border-gray-300': vehiculeForm.get('observation')?.touched || vehiculeForm.get('observation')?.valid,
                  'border-red-500': vehiculeForm.get('observation')?.invalid && vehiculeForm.get('observation')?.touched
                }"></textarea>
      <div *ngIf="vehiculeForm.get('observation')?.invalid && vehiculeForm.get('observation')?.touched"
           class="text-red-500 text-xs mt-1">
        Ce champ est obligatoire (minimum 20 caractères)
      </div>
    </div>
    
    <div class="mt-4">
      <label for="degatsApparents" class="block mb-1 text-sm font-medium text-gray-700">
        Dégâts apparents <span class="text-red-500">*</span>
      </label>
      <textarea id="degatsApparents" formControlName="degatsApparents" rows="4"
                class="w-full p-2 border rounded-lg"
                [class]="{
                  'border-gray-300': !vehiculeForm.get('degatsApparents')?.touched || vehiculeForm.get('degatsApparents')?.valid,
                  'border-red-500': vehiculeForm.get('degatsApparents')?.invalid && vehiculeForm.get('degatsApparents')?.touched
                }"></textarea>
      <div *ngIf="vehiculeForm.get('degatsApparents')?.invalid && vehiculeForm.get('degatsApparents')?.touched"
           class="text-red-500 text-xs mt-1">
        Ce champ est obligatoire (minimum 20 caractères)
      </div>
    </div>
  </div>
  
 

</form>