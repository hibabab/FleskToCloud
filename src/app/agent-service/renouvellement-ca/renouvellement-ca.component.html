<div class="flex">
  <app-dashbort></app-dashbort>

  <div class="flex-1 mt-20 ml-0 mr-70">
<main class="flex-1 ml-60 w-full">
  <div class="max-w-6xl mx-auto p-8">
    <div class="relative bg-white flex flex-col items-center rounded-2xl shadow-teal-100 shadow-lg max-w-md w-full p-8">
      <div class="flex flex-col items-center mb-8 text-2xl font-semibold text-teal-800">

        
        <h2 class="font-semibold text-xl text-gray-700 mt-2">Renouvellement contrat auto</h2>
      </div>
      <form [formGroup]="renewalForm" (ngSubmit)="onSubmit()" class="w-full space-y-4">
        <div>
          <label class="block mb-1 text-sm font-medium text-gray-700">CIN</label>
          <input type="number" formControlName="Cin"
                class="bg-gray-50 border border-gray-300 text-gray-900 rounded-lg focus:ring-teal-800 focus:border-teal-800 block w-full p-2"
                placeholder="CIN d'assuré">
          <div *ngIf="renewalForm.get('Cin')?.invalid && renewalForm.get('Cin')?.touched" class="text-red-500 text-sm mt-1">
            Le CIN doit etre 8 chiffres
          </div>
        </div>
        <div>
          <label class="block mb-1 text-sm font-medium text-gray-700">Matricule</label>
          <input type="text" formControlName="Imat"
                class="bg-gray-50 border border-gray-300 text-gray-900 rounded-lg focus:ring-teal-800 focus:border-teal-800 block w-full p-2"
                placeholder="Matricule du véhicule">
          <div *ngIf="renewalForm.get('Imat')?.invalid && renewalForm.get('Imat')?.touched" class="text-red-500 text-sm mt-1">
            Le matricule doit etre sous cette forme 4567TU123
          </div>
        </div>

        <!-- Ajout de la sélection de pack -->
        <div>
          <label class="block mb-1 text-sm font-medium text-gray-700">Pack d'assurance</label>
          <div class="mb-2">
            <div class="flex items-center mb-2">
              <input type="radio" id="keepSamePack" formControlName="packOption" value="same"
                     class="w-4 h-4 text-teal-800 bg-gray-100 border-gray-300 focus:ring-teal-800">
              <label for="keepSamePack" class="ml-2 text-sm font-medium text-gray-700">Garder mon pack actuel</label>
            </div>
            <div class="flex items-center">
              <input type="radio" id="changePack" formControlName="packOption" value="change"
                     class="w-4 h-4 text-teal-800 bg-gray-100 border-gray-300 focus:ring-teal-800">
              <label for="changePack" class="ml-2 text-sm font-medium text-gray-700">Changer de pack</label>
            </div>
          </div>

          <div *ngIf="renewalForm.get('packOption')?.value === 'change'" class="mt-3">
            <select formControlName="packValue"
            class="bg-gray-50 border border-gray-300 text-gray-900 rounded-lg focus:ring-teal-800 focus:border-teal-800 block w-full p-2">
      <option value="" disabled selected>Sélectionnez un pack</option>
      <option value="essentiel">Pack Essentiel</option>
      <option value="dommage">Pack Dommage et Collision</option>
      <option value="tierce">Pack Tierce</option>
    </select>
    <div *ngIf="renewalForm.get('packOption')?.value === 'change' && renewalForm.get('packValue')?.invalid && renewalForm.get('packValue')?.touched" class="text-red-500 text-sm mt-1">
      Veuillez sélectionner un pack
    </div>
          </div>
        </div>

        <button type="submit" [disabled]="renewalForm.invalid"
                class="w-full py-2 px-4 bg-teal-800 text-white rounded-lg mt-6 hover:bg-teal-700 disabled:opacity-50 disabled:cursor-not-allowed">
          <span *ngIf="!isLoading">Valider</span>
          <span *ngIf="isLoading">Traitement...</span>
        </button>
        <div *ngIf="errorMessage" class="text-red-500 text-sm text-center mt-2">
          {{ errorMessage }}
        </div>
        <div *ngIf="successMessage" class="text-teal-600 text-sm text-center mt-2">
          {{ successMessage }}
        </div>
      </form>
    </div>
  </div>
</main>
</div>
