<div class="flex">
  <app-dashbort></app-dashbort>

  <div class="flex-1 mt-20 ml-0 mr-70">
    <!-- Contenu principal centré -->
    <main class="flex-1 ml-60 p-6 bg-gray-50">
      <!-- Titre de la page -->
      <h1 class="text-3xl font-bold text-teal-800 mb-6">Liste des assurés</h1>

      <!-- Barre de recherche -->
      <div class="mb-6 flex items-center">
        <input type="number"
               [(ngModel)]="searchCin"
               (keyup.enter)="searchAssure()"
               placeholder="Rechercher par CIN..."
               class="px-4 py-2 border border-teal-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500 w-64">
        <button (click)="searchAssure()"
                class="ml-2 bg-teal-700 text-white px-4 py-2 rounded-lg hover:bg-teal-800 transition duration-200">
          Rechercher
        </button>
        <button *ngIf="searchMode" (click)="resetSearch()"
                class="ml-2 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition duration-200">
          Réinitialiser
        </button>
      </div>

      <!-- Message lorsqu'aucun assuré n'est trouvé -->
      <div *ngIf="searchMode && assures.length === 0" class="mb-4 p-4 bg-yellow-100 text-yellow-800 rounded-lg">
        Aucun assuré trouvé avec le CIN {{searchCin}}
      </div>

      <!-- Tableau des assurés -->
      <div class="bg-white rounded-lg shadow-md overflow-hidden">
        <table class="min-w-full">
          <thead class="bg-teal-700">
            <tr>
              <th class="py-3 px-4 text-left text-white font-semibold">Numéro Souscription</th>
              <th class="py-3 px-4 text-left text-white font-semibold">Nom</th>
              <th class="py-3 px-4 text-left text-white font-semibold">Prénom</th>
              <th class="py-3 px-4 text-left text-white font-semibold">CIN</th>
              <th class="py-3 px-4 text-left text-white font-semibold">Bonus/Malus</th>
              <th class="py-3 px-4 text-left text-white font-semibold">Téléphone</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let assure of assures" class="hover:bg-gray-50 transition duration-200">
              <td class="py-3 px-4 border-b border-gray-100">{{ assure.NumSouscription }}</td>
              <td class="py-3 px-4 border-b border-gray-100">{{ assure.nom }}</td>
              <td class="py-3 px-4 border-b border-gray-100">{{ assure.prenom }}</td>
              <td class="py-3 px-4 border-b border-gray-100">{{ assure.Cin }}</td>
              <td class="py-3 px-4 border-b border-gray-100">
                <span [ngClass]="{'text-green-600': assure.bonusMalus <= 1, 'text-red-600': assure.bonusMalus >10}" class="font-medium">
                  {{ assure.bonusMalus }}
                </span>
              </td>
              <td class="py-3 px-4 border-b border-gray-100">{{ assure.telephone }}</td>
            </tr>
          </tbody>
        </table>
      </div>
    </main>
  </div>
</div>
